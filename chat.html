<!DOCTYPE html>
<html lang="kk">
<head>
<meta charset="UTF-8">
<title>AI Chat</title>
<style>
/* –ù–µ–≥—ñ–∑–≥—ñ —Ñ–æ–Ω —Å–∞–±–∞“õ—Ç–∞—Ä –±–µ—Ç—ñ–º–µ–Ω –±—ñ—Ä–¥–µ–π */
body {
    margin: 0;
    font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

.chat-box {
    width: 95%;
    max-width: 450px;
    height: 85vh;
    background: #ffffff;
    border-radius: 24px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    box-shadow: 0 20px 50px rgba(0,0,0,0.3);
}

.chat-header {
    background: #10a37f;
    color: white;
    padding: 18px;
    text-align: center;
    font-weight: 600;
    font-size: 18px;
    letter-spacing: 0.5px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.messages {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
    background: #f0f2f5; /* –°”ô–ª —Å“±—Ä“ì—ã–ª—Ç, –∫”©–∑–≥–µ –∂–∞–π–ª—ã —Ñ–æ–Ω */
    display: flex;
    flex-direction: column;
    gap: 12px;
}

/* –•–∞–±–∞—Ä–ª–∞–º–∞–ª–∞—Ä–¥—ã“£ –∂–∞–ª–ø—ã —Å—Ç–∏–ª—ñ */
.msg {
    max-width: 80%;
    padding: 12px 16px;
    font-size: 15px;
    line-height: 1.4;
    position: relative;
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* –ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã —Ö–∞–±–∞—Ä–ª–∞–º–∞—Å—ã */
.user {
    background: #10a37f;
    color: white;
    align-self: flex-end;
    border-radius: 18px 18px 2px 18px;
    box-shadow: 0 2px 5px rgba(16, 163, 127, 0.2);
}

/* –ë–æ—Ç —Ö–∞–±–∞—Ä–ª–∞–º–∞—Å—ã */
.bot {
    background: white;
    color: #333;
    align-self: flex-start;
    border-radius: 18px 18px 18px 2px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    border: 1px solid #e0e0e0;
}

/* –ñ–∞–∑—ã–ø –∂–∞—Ç“õ–∞–Ω–¥–∞“ì—ã –∞–Ω–∏–º–∞—Ü–∏—è */
.typing {
    background: #e8ecef;
    color: #777;
    font-size: 13px;
    border-radius: 15px;
    padding: 8px 15px;
    align-self: flex-start;
}

.input-area {
    display: flex;
    padding: 15px;
    background: white;
    border-top: 1px solid #eee;
    gap: 10px;
}

.input-area input {
    flex: 1;
    padding: 12px 18px;
    border: 1px solid #ddd;
    border-radius: 25px;
    outline: none;
    transition: 0.3s;
    font-size: 15px;
}

.input-area input:focus {
    border-color: #10a37f;
    box-shadow: 0 0 5px rgba(16, 163, 127, 0.1);
}

.input-area button {
    background: #10a37f;
    color: white;
    border: none;
    width: 45px;
    height: 45px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: 0.3s;
    font-size: 18px;
}

.input-area button:hover {
    background: #0d8b6c;
    transform: scale(1.05);
}

.footer {
    display: flex;
    justify-content: space-between;
    padding: 10px 20px;
    font-size: 13px;
    background: #f9f9f9;
    border-top: 1px solid #f0f0f0;
}

.footer a {
    color: #666;
    text-decoration: none;
    transition: 0.2s;
    display: flex;
    align-items: center;
    gap: 5px;
}

.footer a:hover {
    color: #10a37f;
}

/* –°–∫—Ä–æ–ª–ª–±–∞—Ä–¥—ã ”ô–¥–µ–º—ñ–ª–µ—É */
.messages::-webkit-scrollbar {
    width: 5px;
}
.messages::-webkit-scrollbar-thumb {
    background: #ccc;
    border-radius: 10px;
}
</style>
</head>

<body>

<div class="chat-box">
    <div class="chat-header">ü§ñ AI Assistant</div>

    <div class="messages" id="messages">
        {% for msg in messages %}
            {% if msg.role == "user" %}
                <div class="msg user">{{ msg.content }}</div>
            {% else %}
                <div class="msg bot">{{ msg.content }}</div>
            {% endif %}
        {% endfor %}
    </div>

    <form method="POST" class="input-area" onsubmit="showTyping()">
        <input type="text" name="message" placeholder="–°“±—Ä–∞“ì—ã“£–¥—ã –∂–∞–∑..." autocomplete="off" required>
        <button type="submit">‚û§</button>
    </form>

    <div class="footer">
        <a href="/">‚Üê –ë–∞—Å—Ç—ã –±–µ—Ç</a>
        <a href="/clear">üóë –¢–∞–∑–∞–ª–∞—É</a>
    </div>
</div>

<script>
function showTyping() {
    const messages = document.getElementById("messages");

    const typingDiv = document.createElement("div");
    typingDiv.className = "msg typing";
    typingDiv.id = "typing";
    typingDiv.innerText = "AI –∂–∞—É–∞–ø –¥–∞–π—ã–Ω–¥–∞—É–¥–∞...";

    messages.appendChild(typingDiv);
    messages.scrollTop = messages.scrollHeight;
}

// –ë–µ—Ç –∂“Ø–∫—Ç–µ–ª–≥–µ–Ω–¥–µ –∞–≤—Ç–æ–º–∞—Ç—Ç—ã —Ç“Ø—Ä–¥–µ —Ç”©–º–µ–Ω —Ç“Ø—Å—É
window.onload = function() {
    const messages = document.getElementById("messages");
    messages.scrollTop = messages.scrollHeight;
};
</script>

</body>
</html>